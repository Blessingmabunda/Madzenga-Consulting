{"ast":null,"code":"import _objectSpread from\"/Users/softidoc/Documents/MyProjects/Company profile/webiste/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{setUser}from\"../../store/module/user/userSlice\";// Redux slice for user\nimport apiService from\"../../api/auth/auth\";// API service for login\nimport\"./../../css/signup.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){const[values,setValues]=useState({username:\"\",password:\"\"});const handleInputChange=event=>{event.preventDefault();const{name,value}=event.target;setValues(values=>_objectSpread(_objectSpread({},values),{},{[name]:value}));};const[submitted,setSubmitted]=useState(false);const[valid,setValid]=useState(false);const[error,setError]=useState(\"\");const navigate=useNavigate();const dispatch=useDispatch();// Initialize Redux dispatch\nconst handleSubmit=async e=>{e.preventDefault();setSubmitted(true);// Check if both username and password are provided\nif(values.username&&values.password){try{// Call the login API service function\nconst response=await apiService.loginUser({username:values.username,password:values.password});// If successful, dispatch user data to Redux and navigate to home\nif(response){setValid(true);dispatch(setUser({id:response.id,username:response.username}));navigate(\"/home\");}}catch(error){// Handle errors if login fails\nsetError(\"Invalid username or password. Please try again.\");}}else{setError(\"Please fill out both fields.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"signup-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),submitted&&valid&&/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Welcome back!\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Your login was successful!\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!valid&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-field\",type:\"text\",placeholder:\"Username\",name:\"username\",value:values.username,onChange:handleInputChange}),submitted&&!values.username&&/*#__PURE__*/_jsx(\"span\",{id:\"username-error\",children:\"Please enter your username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-field\",type:\"password\",placeholder:\"Password\",name:\"password\",value:values.password,onChange:handleInputChange}),submitted&&!values.password&&/*#__PURE__*/_jsx(\"span\",{id:\"password-error\",children:\"Please enter a password\"}),/*#__PURE__*/_jsx(\"button\",{className:\"form-field\",type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"already-registered\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign up here\"})]})})]})})});}","map":{"version":3,"names":["React","useState","useNavigate","useDispatch","setUser","apiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","values","setValues","username","password","handleInputChange","event","preventDefault","name","value","target","_objectSpread","submitted","setSubmitted","valid","setValid","error","setError","navigate","dispatch","handleSubmit","e","response","loginUser","id","className","children","onSubmit","type","placeholder","onChange","href"],"sources":["/Users/softidoc/Documents/MyProjects/Company profile/webiste/src/pages/public/login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { setUser } from \"../../store/module/user/userSlice\"; // Redux slice for user\nimport apiService from \"../../api/auth/auth\"; // API service for login\nimport \"./../../css/signup.css\";\n\nexport default function Login() {\n  const [values, setValues] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  const handleInputChange = (event) => {\n    event.preventDefault();\n    const { name, value } = event.target;\n    setValues((values) => ({\n      ...values,\n      [name]: value,\n    }));\n  };\n\n  const [submitted, setSubmitted] = useState(false);\n  const [valid, setValid] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch(); // Initialize Redux dispatch\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSubmitted(true);\n\n    // Check if both username and password are provided\n    if (values.username && values.password) {\n      try {\n        // Call the login API service function\n        const response = await apiService.loginUser({\n          username: values.username,\n          password: values.password,\n        });\n\n        // If successful, dispatch user data to Redux and navigate to home\n        if (response) {\n          setValid(true);\n          dispatch(setUser({ id: response.id, username: response.username }));\n          navigate(\"/home\");\n        }\n      } catch (error) {\n        // Handle errors if login fails\n        setError(\"Invalid username or password. Please try again.\");\n      }\n    } else {\n      setError(\"Please fill out both fields.\");\n    }\n  };\n\n  return (\n    <div className=\"signup-page\">\n      <div className=\"form-container\">\n        <form className=\"register-form\" onSubmit={handleSubmit}>\n          <h2>Login</h2>\n\n          {/* Display success message */}\n          {submitted && valid && (\n            <div className=\"success-message\">\n              <h3>Welcome back!</h3>\n              <div>Your login was successful!</div>\n            </div>\n          )}\n\n          {/* Display error message */}\n          {error && <div className=\"error-message\">{error}</div>}\n\n          {!valid && (\n            <>\n              <input\n                className=\"form-field\"\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                value={values.username}\n                onChange={handleInputChange}\n              />\n              {submitted && !values.username && (\n                <span id=\"username-error\">Please enter your username</span>\n              )}\n\n              <input\n                className=\"form-field\"\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                value={values.password}\n                onChange={handleInputChange}\n              />\n              {submitted && !values.password && (\n                <span id=\"password-error\">Please enter a password</span>\n              )}\n\n              <button className=\"form-field\" type=\"submit\">\n                Login\n              </button>\n            </>\n          )}\n\n          <div className=\"already-registered\">\n            <span>\n              Don't have an account? <a href=\"/signup\">Sign up here</a>\n            </span>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}